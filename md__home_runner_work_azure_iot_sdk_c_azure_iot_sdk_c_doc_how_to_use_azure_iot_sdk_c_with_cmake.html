<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azure IoT C SDK: SDK CMake integration with your application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azure IoT C SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SDK CMake integration with your application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes how to use your application CMake configuration to include and build the device C SDK.</p>
<h1><a class="anchor" id="autotoc_md106"></a>
C Device SDK Git submodule</h1>
<p>Inclusion of the device C SDK usually uses git submodules to include the SDK into your application source code. For the example project CMake file below, the device C SDK is installed at your root project in a directory called <code>azure-iot-sdk-c</code>.</p>
<h1><a class="anchor" id="autotoc_md107"></a>
Application CMake project example</h1>
<p>The device C SDK CMake files are configured to be directly referenced from your application CMake. The first step of your application CMake file is to set the SDK configuration options, and then include the SDK in your CMake by adding the <code>add_subdirectory()</code> to the SDK location within your project.</p>
<p>Below is an example of an application project CMake.txt file which referances the Azure IoT device C SDK source code. </p><div class="fragment"><div class="line">cmake_minimum_required (VERSION 3.7)</div>
<div class="line">PROJECT(iothub_device_sample_project C)</div>
<div class="line"> </div>
<div class="line"># Set Azure IoT SDK C settings</div>
<div class="line">set(use_mqtt ON CACHE  BOOL &quot;Set mqtt on&quot; FORCE )</div>
<div class="line">set(skip_samples ON CACHE  BOOL &quot;Set slip_samples on&quot; FORCE )</div>
<div class="line">set(BUILD_TESTING OFF CACHE  BOOL &quot;Set BUILD_TESTING off&quot; FORCE )</div>
<div class="line"> </div>
<div class="line"># Add Azure IoT SDK C</div>
<div class="line">add_subdirectory(azure-iot-sdk-c out)</div>
<div class="line"> </div>
<div class="line">compileAsC99()</div>
<div class="line"> </div>
<div class="line">set(iothub_project_files</div>
<div class="line">    your_application_file.c</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">#Conditionally use the SDK trusted certs in the samples</div>
<div class="line">if(${use_sample_trusted_cert})</div>
<div class="line">    add_definitions(-DSET_TRUSTED_CERT_IN_SAMPLES)</div>
<div class="line">    include_directories(${PROJECT_SOURCE_DIR}/certs)</div>
<div class="line">    set(iothub_c_files ${iothub_c_files} ${PROJECT_SOURCE_DIR}/certs/certs.c)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line">include_directories(.)</div>
<div class="line"> </div>
<div class="line">add_executable(iothub_device_sample ${iothub_project_files})</div>
<div class="line"> </div>
<div class="line">target_link_libraries(iothub_device_sample iothub_client)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
