<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azure IoT C SDK: Running the C SDK on Constrained Devices</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azure IoT C SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Running the C SDK on Constrained Devices </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>IoT devices are coming with greater memory constrains and the IoTHub SDK has options to shrink its ROM and RAM footprint considerably when you invoke cmake with the correct flags. These are some tips to reduce the c sdk memory footprints on these devices.</p>
<p>For <b>constrained devices</b>, where memory is measured in kilobytes and not megabytes, there are even lighter weight SDK options available. See <a href="https://learn.microsoft.com/azure/iot-develop/concepts-using-c-sdk-and-embedded-c-sdk">Other Azure IoT SDKs</a> to learn more.</p>
<h1><a class="anchor" id="autotoc_md131"></a>
Run with only MQTT</h1>
<p>To maximize memory usage you should only include the protocol that is needed. For constrained devices, we recommend using MQTT which provides the best balance between RAM/ROM usage and feature support. To enable the c-sdk to run with just the mqtt protocol you will need to run the following cmake command:</p>
<div class="fragment"><div class="line">cmake -Duse_amqp=OFF -Duse_http=OFF &lt;Path_to_cmake&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md132"></a>
Run without logging</h1>
<p>There is extensive logging throughout the SDK. Every message will be included in the SDK's RAM and ROM footprint. Removing logging will reduce the size of your application.</p>
<div class="fragment"><div class="line">cmake -Duse_amqp=OFF -Duse_http=OFF -Dno_logging=ON &lt;Path_to_cmake&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md133"></a>
Running the SDK without upload to blob</h1>
<p>Upload to blob is an SDK feature used to send data to Azure Storage. If your application doesn't need this feature you can remove the files</p>
<div class="fragment"><div class="line">cmake -Duse_amqp=OFF -Duse_http=OFF -Dno_logging=ON -Ddont_use_uploadtoblob=ON &lt;Path_to_cmake&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md134"></a>
Running strip on Linux environment</h1>
<p>The <a href="https://en.wikipedia.org/wiki/Strip_(Unix)">strip</a> command is used to reduce the size of binaries on the linux systems. After you compile your application use strip to reduce the size of the final application.</p>
<div class="fragment"><div class="line">strip -s &lt;Path_to_executable&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
