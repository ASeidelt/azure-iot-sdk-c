<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azure IoT C SDK: Run a simple C sample on s5tj200 device running Tizen RT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azure IoT C SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Run a simple C sample on s5tj200 device running Tizen RT </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md168"></a>
Table of Contents</h1>
<ul>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Step-1-Prerequisites">Step 1: Prerequisites</a></li>
<li><a href="#Step-2-PrepareDevice">Step 2: Prepare your Device</a></li>
<li><a href="#Step-3-Build">Step 3: Build and Run the Sample</a></li>
</ul>
<p><a class="anchor" id="Introduction"></a> </p>
<h1><a class="anchor" id="autotoc_md169"></a>
Introduction</h1>
<p><b>About this document</b></p>
<p>This document describes the steps for connecting an <a href="http://www.samsung.com/semiconductor/minisite/Exynos/w/">Tizen RT-enabled s5jt200</a> device to Azure IoT Hub. This multi-step process includes:</p><ul>
<li>Configuring Azure IoT Hub</li>
<li>Registering your IoT device</li>
<li>Build and deploy Azure IoT SDK on device</li>
</ul>
<p><a class="anchor" id="Step-1-Prerequisites"></a> </p>
<h1><a class="anchor" id="autotoc_md170"></a>
Step 1: Prerequisites</h1>
<p>You should have the following items ready before beginning the process:</p>
<ul>
<li>Prepare <a href="https://github.com/Azure/azure-iot-sdk-c">azure-iot-sdk-c</a> to MS Azure IoT services</li>
<li><a href="https://github.com/Azure/azure-iot-sdks/blob/master/doc/setup_iothub.md">Setup your IoT hub</a></li>
<li><a href="https://github.com/Azure/azure-iot-sdks/blob/master/doc/manage_iot_hub.md">Provision your device and get its credentials</a></li>
</ul>
<p><a class="anchor" id="Step-2-PrepareDevice"></a> </p>
<h1><a class="anchor" id="autotoc_md171"></a>
Step 2: Prepare your Device</h1>
<p>s5jt200 is a IoT device with Wi-Fi connectivity. s5jt200 can communicate Azure IoThub with Wi-Fi connection.</p>
<ul>
<li>Prepare <a href="http://meritech.co.kr/eng/products/ap_dp.php">SIDK_S5JT200</a> HW platform with s5jt200</li>
<li>Prepare <a href="https://git.tizen.org/cgit/rtos/tinyara/">Software and development environment</a></li>
</ul>
<p>After unboxing your HW platform, Please do the followings:</p>
<ul>
<li>Install the <a href="https://launchpad.net/gcc-arm-embedded/4.9/4.9-2015-q3-update">ARM compile toolchain</a> and add your environment about cross compiler path likes <div class="fragment"><div class="line">export CROSSDEV=/toolchain/gcc-arm-none-eabi-4_9-2015q3/bin/arm-none-eabi-</div>
</div><!-- fragment --></li>
<li>Get source cdoe in your machine. <div class="fragment"><div class="line">git clone git://git.tizen.org/rtos/tinyara</div>
</div><!-- fragment --></li>
<li>Config and compile for SIDK_S5JT200. <div class="fragment"><div class="line">cd tinyara/os/tools</div>
<div class="line">./configure.sh sidk_s5jt200/sidk_tash</div>
<div class="line">cd ..</div>
<div class="line">make</div>
</div><!-- fragment --></li>
<li><p class="startli">Install OpenOCD and FTDI chip drivers. When you first connect sidk board using USB , there isnâ€™t correct driver.You need to install FT2232 IC driver following below instruction.</p><ul>
<li>Copy openocd directory (build\configs\sidk_s5jt200\openocd) to your windows PC.</li>
<li>Install FTDI chip drivers for your environment.</li>
<li>If you properly install the driver, then you can see USB Serial Port on windows device manager.</li>
</ul>
<p class="startli"><img src="media/tizenRT4.png" alt="usbport" class="inline"/>.</p>
</li>
</ul>
<p><a class="anchor" id="Step-3-Build"></a> </p>
<h1><a class="anchor" id="autotoc_md172"></a>
Step3: Build and Fusing the samples</h1>
<h2><a class="anchor" id="autotoc_md173"></a>
Build Tizen RT with azure-iot-sdk-c</h2>
<ul>
<li>Download the azure-iot-sdk-c. <div class="fragment"><div class="line">git clone --recursive https://github.com/Azure/azure-iot-sdk-c.git</div>
<div class="line">cd azure-iot-sdk-c</div>
<div class="line">git submodule init</div>
<div class="line">git submodule update</div>
</div><!-- fragment --></li>
<li>Open iothub_client/samples/iothub_client_sample_http/iothub_client_sample_http.c on azure-iot-sdk-c and replace "[device connection string]" with the device connection string that you obtained in Step 1.</li>
<li>Configure Tizen RT to support Azure cloud with 'make menuconfig'. <div class="fragment"><div class="line">cd tinyara/os</div>
<div class="line">make menuconfig</div>
</div><!-- fragment --><ul>
<li>Set your azure-iot-sdk-c path.<ul>
<li><p class="startli">Go to 'Build Configuration' and set your azure-iot-sdk-c path on 'cloud directory'.</p>
<p class="startli"><img src="media/tizenRT1.png" alt="setpath" class="inline"/></p>
</li>
</ul>
</li>
<li>Enable azure-iot-sdk-c.<ul>
<li>Go to 'Application Configuration' and select 'cloud'.</li>
<li><p class="startli">If you want to run Azure samples like iothub_client_sample_http and simplesample_http, select 'Azure cloud samples'.</p>
<p class="startli"><img src="media/tizenRT2.png" alt="enablecloud" class="inline"/></p>
</li>
</ul>
</li>
<li>Enable built-in cloud application.<ul>
<li>Go to 'Application Configuration' and 'Examples' and select 'cloud test'.</li>
<li><p class="startli">If you want to run Azure samples with sensor devices on HW platform, select 'cloud test with sensor'. And then write the device connection string that you obtained in Step 1 on 'azure device connection string'</p>
<p class="startli"><img src="media/tizenRT3.png" alt="enablecloud" class="inline"/></p>
</li>
</ul>
</li>
</ul>
</li>
<li>Execute 'make' after configuration. Then you can see libazure.a on os/libraries directory.</li>
</ul>
<h2><a class="anchor" id="autotoc_md174"></a>
Fusing OS image</h2>
<ul>
<li>Plug the USB cable on board. You can check two USB serial ports. First port is for USB download and second port is for serial.</li>
<li><p class="startli">Execute flash.bat on openocd directory. It erases flash memory and writes new image.</p>
<p class="startli"><img src="media/tizenRT7.png" alt="pusing" class="inline"/></p>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md175"></a>
Run samples</h2>
<ul>
<li><p class="startli">Execute console application likes putty. Configure it with 115200 baud rate and then run it with serial session.</p>
<p class="startli"><img src="media/tizenRT5.png" alt="putty" class="inline"/></p>
</li>
<li><p class="startli">Reset board and write 'cloud azure-iothub-client' on console application to run azure sample.</p>
<p class="startli"><img src="media/tizenRT8.png" alt="exec" class="inline"/> </p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
